<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title x-text="data.meta?.title ?? 'Simple Static Site'">Simple Static Site</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/print.css">

    <!-- Alpine.js for simple declarative binding -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <!-- wordcloud2.js for word cloud visualization -->
    <script src="https://cdn.bootcdn.net/ajax/libs/wordcloud2.js/1.2.3/wordcloud2.min.js" defer></script>
</head>

<body x-data="{ 
    data: {}, 
    jsonInput: '', 
    error: '', 
    showJsonForm: false, 
    load(){ 
      fetch('data/sample1.json')
        .then(r=>r.json())
        .then(d=>{ this.data = d; this.jsonInput = JSON.stringify(d, null, 2); this.renderWordCloud(); })
        .catch(e=>console.warn('load failed',e)) 
    },
    loadSample(){
      fetch('data/sample1.json')
        .then(r=>r.json())
        .then(d=>{
          this.jsonInput = JSON.stringify(d, null, 2);
          this.error = '';
          this.data = d;
          this.renderWordCloud();
        })
        .catch(e=>{
          this.error = 'Could not load sample: ' + (e.message || e);
          console.warn('loadSample failed', e);
        })
    }, 
    applyJson(){ 
      try{ 
        this.data = JSON.parse(this.jsonInput || '{}'); 
        this.error = '';
        this.renderWordCloud();
      }catch(e){ 
        this.error = 'Invalid JSON: ' + e.message; 
      } 
    }, 
    clearInput(){ this.jsonInput = ''; this.error = '' },
    renderWordCloud(){
      if(window.WordCloud && this.data.interactionTypes){
        const list = this.data.interactionTypes.map(item => [item.word, item.weight]);
        WordCloud(document.getElementById('wordcloud'), {
          list: list,
          gridSize: 10,
          weightFactor: 8,
          fontFamily: 'sans-serif',
          color: 'random-dark',
          rotateRatio: 0,
          backgroundColor: '#fff'
        });
      }
    }
  }" x-init="load()">

    <header class="jumbotron jumbotron-fluid text-white bg-primary mb-4">
        <div class="container">
            <h1 class="display-4" x-text="data.header?.title ?? 'ChatGPT Usage Type'">ChatGPT Usage Type</h1>
            <p class="lead">
                A brief summary of how you used chatGPT in
                <span data-year x-text="data.header?.year">2025</span>.
            </p>
        </div>
    </header>

    <!-- Toggle + JSON input form: paste custom JSON and apply it to the page (collapsed by default) -->
    <section class="container mb-4" id="custom-json-input">
        <div class="d-flex justify-content-start">
            <button class="btn btn-sm btn-light mr-2" @click="showJsonForm = !showJsonForm"
                x-text="showJsonForm ? 'Hide JSON form' : 'Show JSON form'">Show JSON Form</button>
            <small class="text-muted align-self-center">Insert custom JSON (collapsed by default)</small>
        </div>

        <div x-show="showJsonForm" x-cloak x-transition class="mt-3">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title">Insert custom JSON</h2>
                    <form @submit.prevent="applyJson()" novalidate>
                        <div class="form-group">
                            <label for="jsonInput">Paste JSON (<a href="data/sample1.json"
                                    target="_blank">sample1.json</a>)</label>
                            <textarea id="jsonInput" x-model="jsonInput" rows="8" class="form-control"
                                placeholder='{"usageProfile": {...}}'></textarea>
                        </div>
                        <div class="mt-2">
                            <button class="btn btn-primary" type="submit">Apply JSON</button>
                            <button type="button" class="btn btn-secondary ml-2" @click="loadSample()">Load
                                sample</button>
                            <button type="button" class="btn btn-light ml-2" @click="clearInput()">Clear</button>
                        </div>
                        <div class="text-danger mt-2" x-text="error" x-show="error"></div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <main class="container">

        <!-- My personal AI Usage Profile -->
        <section id="usage-profile" class="card mb-3">
            <div class="card-body text-center">
                <h2 class="card-title mb-1">
                    <span class="display-4" x-text="data.archetype.name">
                        Archetype Headline
                    </span>
                </h2>
            </div>
            <div class="card-body">
                <p class="lead text-muted mb-2" x-text="data.archetype.summary">
                    Personal description of the archetype goes here.
                </p>
            </div>
        </section>

        <section id="interaction-types" class="card mb-3">
            <div class="card-body">
                <h2 class="card-title">You used the AI for...</h2>
                <div id="wordcloud" style="width: 100%; height: 400px; border: 1px solid #ccc;"></div>
            </div>
        </section>

        <section id="user-level" class="card mb-3">
            <div class="card-body">
                <h2 class="card-title text-center">Your experience level</h2>

                <!-- visual 10-block scale (left = interested, right = guru) -->
                <div class="user-level-scale my-3">
                  <div class="d-flex align-items-center user-level-row">
                    <template x-for="(__, index) in 10" :key="index">
                      <button
                        type="button"
                        class="p-0 border-0 user-level-block"
                        :aria-pressed="(index+1) <= (data.userLevel?.value ?? 8) ? 'true' : 'false'"
                        @click="data.userLevel = data.userLevel || {}; data.userLevel.value = index+1"
                        :title="(index+1) + '/10'"
                        :style="(() => {
                          const i = index + 1;
                          const lightness = Math.round(96 - (i - 1) * 7); // ~96 -> ~31
                          const bg = `hsl(140,60%,${lightness}%)`;
                          return `background:${bg};`;
                        })()"
                      ></button>
                    </template>
                  </div>

                  <!-- red dot pointer placed over scale based on userLevel.value -->
                  <div
                    class="user-level-pointer"
                    x-cloak
                    :style="{
                      left: (((data.userLevel.value ?? 1) - 1) / 9 * 100) + '%'
                    }"
                    aria-hidden="true"
                  ></div>
                </div>

                <div class="d-flex justify-content-between mt-2 small text-muted scale-labels">
                  <span>Interested user</span>
                  <span class="mx-auto">Senior / Experienced</span>
                  <span class="text-right">Guru</span>
                </div>

                <p x-text="data.userLevel?.reason ?? 'A 8 is defined by precise prompts, know capabilities and limits of AI, regular punctual usage.'"
                   class="mt-3">A 8 is defined by precise prompts, know capabilities and limits of ai, regular punktual uasage.</p>
            </div>
        </section>

        <!-- Tips how I can increase my user level -->
        <section id="tips-level-up" class="card mb-5">
            <div class="card-body">
                <h2 class="card-title">Tips how I can increase my user level</h2>
                <ul>
                    <template x-if="data.tips && data.tips.length">
                        <template x-for="(tip, i) in data.tips" :key="i">
                            <li x-text="tip">Practice crafting clearer, more specific prompts.</li>
                        </template>
                    </template>
                </ul>
            </div>
        </section>
    </main>

    <!-- keep lightweight: no jQuery required; bootstrap JS omitted (only CSS used) -->
    <script src="js/main.js"></script>
</body>

</html>